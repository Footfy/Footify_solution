
-- TABELA DE USUÁRIOS
CREATE TABLE FO_USUARIO (
    ID_USUARIO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOME VARCHAR2(150),
    EMAIL VARCHAR2(100) UNIQUE NOT NULL,
    TELEFONE VARCHAR2(20),
    GENERO VARCHAR2(50),
    DATA_NASCIMENTO DATE,
    LOGIN VARCHAR2(50) UNIQUE,
    SENHA VARCHAR2(50),
    CONSTRAINT PK_USUARIO PRIMARY KEY (ID_USUARIO)
);

-- TABELA DE PRODUTOS
CREATE TABLE FO_PRODUTO (
    ID_PRODUTO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOME VARCHAR2(200),
    DESCRICAO CLOB,
    MARCA VARCHAR2(50),
    CATEGORIA VARCHAR2(50),
    URL_IMAGEM CLOB,
    CONSTRAINT PK_PRODUTO PRIMARY KEY (ID_PRODUTO)
);

-- TABELA DE CARACTERÍSTICAS DOS PRODUTOS
CREATE TABLE FO_CARACTERISTICA_PRODUTO (
    ID_CARACTERISTICA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_PRODUTO NUMBER NOT NULL,
    TIPO_USO VARCHAR2(50),
    GENERO_DESTINADO VARCHAR2(20),
    COR_PREDOMINANTE VARCHAR2(30),
    TAMANHO_DISPONIVEL VARCHAR2(10),
    CONSTRAINT PK_CARAC_PRODUTO PRIMARY KEY (ID_CARACTERISTICA),
    CONSTRAINT FK_CARAC_PRODUTO FOREIGN KEY (ID_PRODUTO) REFERENCES FO_PRODUTO(ID_PRODUTO)
);

-- TABELA DE LOJAS
CREATE TABLE FO_LOJA (
    ID_LOJA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOME VARCHAR2(100),
    URL_SITE VARCHAR2(200),
    CONSTRAINT PK_LOJA PRIMARY KEY (ID_LOJA)
);

-- TABELA DE PREÇOS DOS PRODUTOS
CREATE TABLE FO_PRECO_PRODUTO (
    ID_PRECO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_PRODUTO NUMBER NOT NULL,
    ID_LOJA NUMBER NOT NULL,
    PRECO_LISTADO NUMBER(10,2),
    PRECO_PROMOCIONAL NUMBER(10,2),
    URL_PAGINA_PRODUTO VARCHAR2(500),
    DATA_COTACAO DATE DEFAULT SYSDATE,
    CONSTRAINT PK_PRECO_PRODUTO PRIMARY KEY (ID_PRECO),
    CONSTRAINT FK_PRODUTO FOREIGN KEY (ID_PRODUTO) REFERENCES FO_PRODUTO(ID_PRODUTO),
    CONSTRAINT FK_LOJA FOREIGN KEY (ID_LOJA) REFERENCES FO_LOJA(ID_LOJA)
);

-- TABELA DE INTERAÇÕES (buscas)
CREATE TABLE FO_INTERACAO (
    ID_INTERACAO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_USUARIO NUMBER,
    DATA_HORA TIMESTAMP DEFAULT SYSTIMESTAMP,
    TIPO_BUSCA VARCHAR2(50),
    RESULTADOS_ENCONTRADOS NUMBER,
    CONSTRAINT PK_INTERACAO PRIMARY KEY (ID_INTERACAO),
    CONSTRAINT FK_INTERACAO_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES FO_USUARIO(ID_USUARIO)
);

-- TABELA DE CLIQUES
CREATE TABLE FO_CLIQUE_PRODUTO (
    ID_CLIQUE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_USUARIO NUMBER,
    ID_PRODUTO NUMBER,
    DATA_HORA TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT PK_CLIQUE PRIMARY KEY (ID_CLIQUE),
    CONSTRAINT FK_CLIQUE_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES FO_USUARIO(ID_USUARIO),
    CONSTRAINT FK_CLIQUE_PRODUTO FOREIGN KEY (ID_PRODUTO) REFERENCES FO_PRODUTO(ID_PRODUTO)
);

-- TABELA DE FEEDBACK DOS USUÁRIOS
CREATE TABLE FO_FEEDBACK (
    ID_FEEDBACK NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_USUARIO NUMBER NOT NULL,
    ID_PRODUTO NUMBER NOT NULL,
    AVALIACAO NUMBER(1),
    COMENTARIO CLOB,
    DATA_FEEDBACK DATE DEFAULT SYSDATE,
    CONSTRAINT PK_FEEDBACK PRIMARY KEY (ID_FEEDBACK),
    CONSTRAINT FK_FEEDBACK_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES FO_USUARIO(ID_USUARIO),
    CONSTRAINT FK_FEEDBACK_PRODUTO FOREIGN KEY (ID_PRODUTO) REFERENCES FO_PRODUTO(ID_PRODUTO)
);

-- TABELA DE PREFERÊNCIAS DO USUÁRIO
CREATE TABLE FO_PREFERENCIA_USUARIO (
    ID_PREFERENCIA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_USUARIO NUMBER NOT NULL,
    TIPO_USO VARCHAR2(50),
    GENERO_DESEJADO VARCHAR2(20),
    COR_FAVORITA VARCHAR2(30),
    TAMANHO_CALCADO VARCHAR2(10),
    CONSTRAINT PK_PREFERENCIA_USUARIO PRIMARY KEY (ID_PREFERENCIA),
    CONSTRAINT FK_PREF_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES FO_USUARIO(ID_USUARIO)
);
